{
  "enabled": true,
  "name": "Code Quality & PFSUS Standards Monitor",
  "description": "Monitors source code changes and PFSUS standard updates to suggest code improvements and ensure all PFSUS files follow the latest standards",
  "version": "1",
  "when": {
    "type": "fileEdited",
    "patterns": [
      "**/*.py",
      "**/*.md",
      "**/*.json",
      "core/PFSUS/*.mmcp.mmd",
      "core/PFSUS/*.mmcp.mdd",
      "core/PFSUS/.legend.mmcp/templates/*.mmcp.md",
      "core/PFSUS/.legend.mmcp/schemas/*.schema.json"
    ]
  },
  "then": {
    "type": "askAgent",
    "prompt": "You are a code quality and standards expert. Analyze the changes made to the file(s) and provide feedback:\n\nEnforce file name extention chains as wrapping or embedding order and format accordingly\nEnforce Calculus wrapper chains for effeciency and better factoring\nEnforce Shorthand PFSUS where reasonable\nEnforce Adress and STRATEGY code formatting standards\n\n1. If this is a Python file:\n   - Check for code smells (long methods, complex conditionals, duplicate code)\n   - Suggest design pattern implementations where appropriate\n   - Recommend performance optimizations\n   - Ensure proper error handling and logging\n   - Verify adherence to PEP 8 style guidelines\n\n2. If this is a PFSUS standard file (*.mmcp.mmd or *.mmcp.</mermaid-diagram-type>.mdd):\n   - If this is the main PFSUS standard being updated, identify what changed and prepare updates for all dependent standards\n   - Ensure the file follows the latest PFSUS format specifications\n   - Check for consistency with other PFSUS files\n\n3. If this is a PFSUS template or schema file:\n   - Ensure it follows the latest PFSUS standards\n   - Check for consistency with related templates/schemas\n\n4. If this is a JSON file:\n   - Validate structure and formatting\n   - Check for consistency with related schemas if applicable\n\nProvide specific, actionable recommendations for improving the code or document while maintaining its existing functionality. Focus on:\n- Readability improvements\n- Maintainability enhancements\n- Performance optimizations\n- Consistency with project standards\n- Increased infodensity\n- Optimal PFSUS format and shorthand usage\n\nIf you identify any issues that require updates to other files to maintain consistency with PFSUS standards, specify exactly which files need to be updated and how."
  }
}