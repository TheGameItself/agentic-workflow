{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "MMCP System Schema",
  "type": "object",
  "required": ["type", "id", "version", "system"],
  "properties": {
    "type": {
      "type": "string",
      "enum": ["System", "Architecture", "Infrastructure"]
    },
    "id": {
      "type": "string",
      "pattern": "^[A-Z]+-[A-Z]+-[0-9]{3}$"
    },
    "version": {
      "type": "string",
      "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
    },
    "last_modified": {
      "type": "string",
      "format": "date-time"
    },
    "author": {
      "type": "string"
    },
    "system": {
      "type": "object",
      "required": ["name", "components"],
      "properties": {
        "name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "components": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["name", "type"],
            "properties": {
              "name": {
                "type": "string"
              },
              "type": {
                "type": "string"
              },
              "description": {
                "type": "string"
              },
              "interfaces": {
                "type": "array",
                "items": {
                  "type": "object",
                  "required": ["name", "direction"],
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "direction": {
                      "type": "string",
                      "enum": ["input", "output", "bidirectional"]
                    },
                    "protocol": {
                      "type": "string"
                    },
                    "data_format": {
                      "type": "string"
                    }
                  }
                }
              },
              "dependencies": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "configuration": {
                "type": "object"
              },
              "metrics": {
                "type": "array",
                "items": {
                  "type": "object",
                  "required": ["name", "unit"],
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "unit": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        },
        "connections": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["from", "to"],
            "properties": {
              "from": {
                "type": "string"
              },
              "to": {
                "type": "string"
              },
              "protocol": {
                "type": "string"
              },
              "data_format": {
                "type": "string"
              },
              "description": {
                "type": "string"
              }
            }
          }
        }
      }
    }
  }
}